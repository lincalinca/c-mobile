# Quick Cost Reference: Token Consumption Changes\n\n## TL;DR\n\n**Token increase: ~1,130-1,380 tokens per receipt (~49% more)**\n\n**Cost increase: ~$0.0063 per receipt (Phase 1+2+3)**\n\n---\n\n## Breakdown by Phase\n\n### Phase 1 (Gear Details + Summary)\n- **Token increase**: +800-900 tokens per receipt\n- **Cost increase**: ~$0.0038 per receipt\n- **Monthly (100 receipts)**: +$0.38\n- **Annual (1,200 receipts)**: +$4.56\n\n### Phase 2 (Warranty Handling)\n- **Token increase**: +200-300 tokens per receipt\n- **Cost increase**: ~$0.0015 per receipt\n- **Monthly (100 receipts)**: +$0.15\n- **Annual (1,200 receipts)**: +$1.80\n\n### Phase 3 (Merchant Matching)\n- **Token increase**: +50-200 tokens per receipt (merchant list)\n- **Cost increase**: ~$0.0010 per receipt\n- **Monthly (100 receipts)**: +$0.10\n- **Annual (1,200 receipts)**: +$1.20\n\n---\n\n## Total Cost Impact\n\n| Metric | Baseline | Phase 1+2 | Phase 1+2+3 | Increase |\n|--------|----------|-----------|-------------|----------|\n| Tokens/receipt | ~3,050 | ~3,950 | ~4,555 | +49% |\n| Cost/receipt | $0.0092 | $0.0137 | $0.0155 | +68% |\n| Monthly (100) | $0.92 | $1.37 | $1.55 | +$0.63 |\n| Annual (1,200) | $11.04 | $16.44 | $18.60 | +$7.56 |\n\n---\n\n## Assumptions\n\n- Claude 3.5 Sonnet pricing: $3/1M input, $15/1M output\n- Average receipt: 3-5 line items\n- Phase 3: 10-50 merchants in user history\n- Vision tokens: 500-1,000 per receipt image\n- Temperature: 0.1 (optimal for consistency)\n\n---\n\n## Verification Steps\n\n1. Test Phase 1 with 10 receipts, measure actual token usage\n2. Compare against baseline to validate estimates\n3. Adjust Phase 2 & 3 estimates based on Phase 1 results\n4. Monitor merchant list size impact in Phase 3\n\n---\n\n## Cost Optimization\n\n- **Conditional extraction**: Only extract gearDetails for gear items\n- **Merchant caching**: Cache merchant list to reduce per-request overhead\n- **Batch processing**: Process multiple receipts in single call if possible\n- **Volume discounts**: Negotiate with provider at >10k receipts/month\n"
